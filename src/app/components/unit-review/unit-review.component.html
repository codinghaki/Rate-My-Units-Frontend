<!-- Show loading indicator while data is being fetched -->
<div *ngIf="!(unit$ | async) && !(reviews$ | async); else content">
  <p>Loading...</p>
</div>

<ng-template #content>
  <div *ngIf="unit$ | async as unit; else noUnit">
    <h1>{{ unit.name }}</h1>
    <p>{{ unit.code }}</p>

    <div *ngFor="let review of reviews$ | async">
      <p>{{ review.content }}</p>
      <p>Rating: {{ review.score }}</p>
    </div>

    <!-- Review form -->
    <form [formGroup]="reviewForm" (ngSubmit)="submitReview()">
      <textarea
        formControlName="reviewContent"
        placeholder="Write your review"
      ></textarea>
      <input
        type="number"
        formControlName="reviewScore"
        placeholder="Rate the unit"
        min="1"
        max="5"
      />
      <button type="submit" [disabled]="reviewForm.invalid">
        Submit Review
      </button>
    </form>
  </div>

  <!-- Show a fallback if the unit is not found -->
  <ng-template #noUnit>
    <p>Unit not found.</p>
  </ng-template>
</ng-template>
